{% extends "layout.html" %}

{% block pageTitle %}
  Overview
{% endblock %}

{% block beforeContent %}
  {% from "breadcrumbs/macro.njk" import govukBreadcrumbs %}

  {{ govukBreadcrumbs({
  items: [
    {
      text: "Identity standard",
      href: "/index"
    },
    {
      text: "Assess how your identity service meets the standard",
      href: "/start"
    },
    {
      text: "Your scores"
    }
  ]
  }) }}

{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-l">Your score for {{data['section-name']}}</h1>

      {% if data['section-name'] == "evidence" %}

          {% for item in data['testevidence'] %}
            {% if item.chosen and item.shortname == data['evidenceName'] %}
              <p>
                 The {{item.shortname}} has a strength score of {{item.strength}} out of 4.
              {% for explanation in data['explanations'] %}
                {% if explanation.element == "strength" and explanation.score == item.strength %}
                    {{explanation.text}}
                  </p>
                {% endif %}
              {% endfor %}
              <p>
                 The way you check the the {{item.shortname}} achieved a validity score of {{item.validity}}.
              {% for explanation in data['explanations'] %}
                {% if explanation.element == "validity" and explanation.score == item.validity %}
                    {{explanation.text}}
                  </p>
                {% endif %}
              {% endfor %}
            {% endif %}
          {% endfor %}


      {% elif data['section-name'] == "activity" %}

        <p>
          You achieved a score of {{data['activityScore']}} out of 4 for activity checks.
          {% for item in data['explanations'] %}
           {% if item.element == "activity" and item.score == data['activityScore'] %}
             {{item.text}}
           {% endif %}
          {% endfor %}
        </p>

      {% elif data['section-name'] == "fraud" %}
        <p>
          You achieved a score of {{data['fraudScore']}} out of 3 for your fraud checks.
          {% for item in data['explanations'] %}
           {% if item.element == "fraud" and item.score == data['fraudScore'] %}
             {{item.text}}
           {% endif %}
          {% endfor %}
        </p>
      {% elif data['section-name'] == "verification" %}
        <p>
          You achieved a score of {{data['verificationScore']}} out of 4 for verification checks.
          {% for item in data['explanations'] %}
           {% if item.element == "verification" and item.score == data['verificationScore'] %}
             {{item.text}}
           {% endif %}
          {% endfor %}
        </p>
      {% endif %}
      <br>
      <form action="/overview" method="post" novalidate>
        {{ govukButton({
          text: "Continue"
        }) }}
      </form>

    </div>
  </div>

{% endblock %}
