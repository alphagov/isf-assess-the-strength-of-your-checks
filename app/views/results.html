
{% extends "layout.html" %}

{% block pageTitle %}
  GOV.UK Prototype Kit
{% endblock %}

{% block beforeContent %}
  {% from "breadcrumbs/macro.njk" import govukBreadcrumbs %}

  {{ govukBreadcrumbs({
  items: [
    {
      text: "Identity standard",
      href: "/standards-landing-page"
    },{
      text: "Assess how your identity service meets the standard",
      href: "/index"
    },
    {
      text: "How confident you can be in the person’s identity"
    }
  ]
  }) }}

{% endblock %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <h1 class="govuk-heading-l visually-hidden">Your results </h1>
      <div class="banner">
        <div class="banner-message">
          <p class="banner-message">
            {{data['result-message']}}
          </p>
        </div>
      </div>
    </div>

    <div class="govuk-grid-column-two-thirds">

      <!-- {% if risklevel == "dont-know" %}
        <p>Your checks lower the risk of you accepting fake (or 'synthetic') identities or being targeted by third parties that have stolen other people’s identities.</p>

        <div class="govuk-inset-text govuk-!-margin-bottom-9">

          <p>
            <span style="font-weight:bold">Example</span><br>
            The Driver and Vehicle Licensing Agency’s (DVLA’s) <a href="https://www.gov.uk/view-driving-licence">View driving licence information</a> service lets users see information that’s not sensitive. There’s a low risk of identity fraud, so the service only needs low confidence in the user’s identity.
          </p>
        </div>
      {% endif %} -->

    </div>
  </div>

  <div class="govuk-grid-row level-of-protection">
    <h2 class="govuk-heading-m">Risks you protect against</h2>

    <div class="govuk-grid-column-one-quarter">
      <h3 class="">Stolen identity</h3>
      <p>{{ data['stolen-evidence-message'] }} against someone using evidence that doesn’t belong to them.</p>
    </div>
    <div class="govuk-grid-column-one-quarter">
      <h3 class="">Stolen information</h3>
      <p>{{ data['stolen-information-message'] }} against someone using information that doesn’t belong to them.</p>
    </div>
    <div class="govuk-grid-column-one-quarter">
      <h3 class="">Synthetic evidence</h3>
      <p>{{ data['created-evidence-message'] }} against someone using evidence they’ve created for an existing person.</p>
    </div>
    <div class="govuk-grid-column-one-quarter">
      <h3 class="">Manipulated evidence</h3>
      <p>{{ data['tampered-evidence-message'] }} against someone using genuine evidence which has been tampered with.</p>
    </div>
  </div>

  <hr class="govuk-section-break govuk-section-break--xl govuk-section-break--visible">

  <div class="govuk-grid-row" id="recommendations">
    <div class="govuk-grid-column-two-thirds">
      <h2 class="govuk-heading-l">How to protect against your level of risk</h2>
      <p>
        The confidence you have in the identity depends on how much evidence you collect and how thoroughly you do each part of the identity checking process. This makes up an identity profile.
      </p>
      <p>
        To have confidence in the identity you must meet an identity profile.
      </p>
    </div>
    <div class="govuk-grid-column-full">

      <details class="govuk-details">
        <summary class="govuk-details__summary">
          <span class="govuk-details__summary-text">
            Show your scores
          </span>
        </summary>
        <div class="govuk-details__text">

          <!-- <h2 class="govuk-heading-m govuk-!-margin-0">Your evidence checks</h2> -->

          <table class="govuk-table govuk-!-margin-bottom-7 govuk-!-margin-top-0">
            <thead class="govuk-table__head">
              <tr class="govuk-table__row">
                <th class="govuk-table__header" scope="col">Evidence checks</th>
                <th class="govuk-table__header" scope="col">Strength score</th>
                <th class="govuk-table__header" scope="col">Validity score</th>
                <th class="govuk-table__header" scope="col"></th>
              </tr>
            </thead>

            <tbody class="govuk-table__body">
              {% for item in data['testevidence'] %}
                {% if item.chosen %}
                  <tr class="govuk-table__row">
                    <td class="govuk-table__cell" scope="row">{{item.shortname | capitalize}}</td>
                    <td class="govuk-table__cell multi-question" scope="row">
                      {{item.strength}}</span>
                    </td>
                    <td class="govuk-table__cell" scope="row">
                      {{item.validity}}
                    </td>
                    <td class="govuk-table__cell edit" scope="row">
                      <a href="/activity/activity-start">How to change score</a>
                    </td>
                  </tr>
                {% endif %}
              {% endfor %}

              {% if evidenceExists == "false" %}
                <tr class="govuk-table__row">
                  <td class="govuk-table__cell hint" scope="row">You haven’t added any evidence</td>
                  <td class="govuk-table__cell" scope="row"></td>
                  <td class="govuk-table__cell" scope="row"></td>
                </tr>
              {% endif %}

            </tbody>
          </table>

          <!-- <h2 class="govuk-heading-m govuk-!-margin-0">Other identity checks</h2> -->

          <table class="govuk-table govuk-!-margin-bottom-7 govuk-!-margin-top-0">
            <thead class="govuk-table__head">
              <tr class="govuk-table__row">
                <th class="govuk-table__header" scope="col">Other checks</th>
                <th class="govuk-table__header" scope="col">Score</th>
                <th class="govuk-table__header" scope="col"></th>
              </tr>
            </thead>

            <tbody class="govuk-table__body">
              <tr class="govuk-table__row">
                <td class="govuk-table__cell" scope="row">
                  Activity history
                </td>
                <td class="govuk-table__cell" scope="row">
                  {{data['activityScore']}}
                </td>
                <td class="govuk-table__cell edit" scope="row">
                  <a href="/activity/activity-start">How to change score</a>
                </td>
              </tr>
              <tr class="govuk-table__row">
                <td class="govuk-table__cell" scope="row">
                  Fraud
                </td>
                <td class="govuk-table__cell" scope="row">
                  {{data['fraudScore']}}
                </td>
                <td class="govuk-table__cell edit" scope="row">
                  <a href="/fraud/fraud-start">How to change score</a>
                </td>          </tr>
              <tr class="govuk-table__row">
                <td class="govuk-table__cell" scope="row">
                  Verification
                </td>
                <td class="govuk-table__cell multi-question" scope="row">
                  {{data['verificationScore']}}
                </td>
                <td class="govuk-table__cell edit" scope="row">
                  <a href="/verification/verification-start">How to change score</a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </details>
    </div>
    <div class="govuk-grid-column-two-thirds">

      {% if data['user-risk-level'] == 'dont-know' %}
        <h3 class="govuk-heading-m govuk-!-margin-top-7">How the evidence you collect meets identity profiles for different levels of risk</h3>
        {% for levelData in data['profile-results'] %}
          <h3 class="govuk-heading-m">Risk level {{ levelData.level }}</h3>
          {% for profile in levelData.results.profileResults %}
            <h4 class="govuk-heading-s">Profile {{ profile.name }}</h4>
            <!-- <p>You {% if not profile.overallResult %}do not{% endif %} meet this profile</p> -->
            <p>
              To meet this profile you need to:
              <ul class="govuk-list govuk-list--bullet">
                <li>{% if profile.evidenceResult %}✅{% else %}❌{% endif %} collect {{ profile.humanEvidence }}</li>
                {% if profile.activityThreshold %}
                  <li>{% if profile.activityResult %}✅{% else %}❌{% endif %} achieve a history check score of {{ profile.activityThreshold }}</li>
                {% endif %}
                {% if profile.verificationThreshold %}
                  <li>{% if profile.verificationResult %}✅{% else %}❌{% endif %} achieve a verification score of {{ profile.verificationThreshold }}</li>
                {% endif %}
                {% if profile.fraudThreshold %}
                  <li>{% if profile.fraudResult %}✅{% else %}❌{% endif %} achieve a fraud check score of {{ profile.fraudThreshold }}</li>
                {% endif %}
              </ul>
            </p>
          {% endfor %}
        {% endfor %}

      {% else %}

        <!-- <h3 class="govuk-heading-m govuk-!-margin-top-7">Identity profiles for your level of risk</h3> -->

        {% for profile in data['profile-results'] %}
          <h3 class="govuk-heading-m">Profile {{ profile.name }}</h3>
          {% if not profile.overallResult %}

            <p>
              To meet this profile you need to:
              <ul class="govuk-list govuk-list--bullet">
                {% if profile.evidenceResult == false %}<li>collect {{ profile.humanEvidence }}</li>{% endif %}

                {% if profile.activityThreshold %}
                  {% if profile.activityResult == false %}<li>achieve a history check score of {{ profile.activityThreshold }}</li>{% endif %}
                {% endif %}

                {% if profile.verificationThreshold %}
                  {% if profile.verificationResult == false %}<li>achieve a verification score of {{ profile.verificationThreshold }}</li>{% endif %}
                {% endif %}

                {% if profile.fraudThreshold %}
                  {% if profile.fraudResult == false %}<li>achieve a fraud check score of {{ profile.fraudThreshold }}</li>{% endif %}
                {% endif %}
              </ul>
            </p>
          {% else %}
            <p>You meet this profile.</p>
          {% endif %}
        {% endfor %}

      {% endif %}
      <br>
      <p><a href="">Read the guidance on scoring evidence</a></p>

    </div>
  </div>

{% endblock %}
